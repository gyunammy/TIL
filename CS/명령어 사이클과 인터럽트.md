# 명령어 사이클과 인터럽트

<br>

## 명령어 사이클

<br>


프로그램 속 명령어들은 일정한 주기가 반복되며 실행된다. 이 주기를 명령어 사이클이라한다. 명령어 사이클은 인출 사이클과 실행사이클로 나뉘어지며 이 사이클이 반복되며 명령어들이 실행된다.

인출사이클은 메모리에서 필요한 데이터를 뽑아 cpu에 가져오는 과정을 말하며, 실행 사이클은 가져온 데이터를 가지고 명령어를 실행하는 과정을 말한다.

추가적으로 메모리에서 가져온 데이터를 바로 실행하지 않고, 추가적인 메모리 접근이 필요한 경우에 한해 간접 사이클이 추가될 수 있다. 간접 사이클이 실행된 후 해당 명령어가 사용 가능해질 때에 실행 사이클이 실행된다. 

<br>

## 인터럽트

<br>

인터럽트는 cpu가 꼭 주목해야할때, cpu가 최우선적으로 처리해야할 다른 작업이 생겼을때 발생된다.

인터럽트는 cpu가 예상하지 못한 상황을 접했을 경우 발생하며 예외라고도 표현되는 동기 인터럽트와, 주로 입출력장치에 의해 발생하며 하드웨어 인터럽트라고도 표현되는 비동기 인터럽트로 나눌 수 있다.

비동기 인터럽트를 사용하는 이유는 바로 입출력 작업 도중에도 효율적으로 명령어를 처리하기 위함이다. 입출력장치의 입출력작업은 보통 CPU에 비해 느린 속도를 가지고 있으며, 인터럽트를 통해 cpu에게 신호를 주지 않을경우 cpu가 입출력작업여부를 주기적으로 확인해야 한다.

하지만 입출력작업이 끝나면 인터럽트를 발생시키도록 함으로써, cpu는 굳이 따로 확인하지 않더라도 인터럽트가 발생한 시점에 입출력작업이 끝났음을 인지할 수 있게 된다.

<br>

## 인터럽트 처리 순서

<br>

인터럽트가 발생할 경우 cpu가 이를 처리하는 순서는 다음과 같다.

<br>

1. 입출력 장치는 cpu에 인터럽트 요청 신호를 보냄. 즉 다른 작업을 하고 있는 cpu에게 인터럽트 요청 신호를 보낸다.

2. cpu는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트 여부를 확인한다. 

3. cpu는 인터럽트 요청을 확인하고 인터럽트 플래그를 통해 현재 인터럽트를 받아들일 수 있는지 확인한다. 인터럽트 플래그란 인터럽트요청 신호를 받아들일지 무시할지를 결정하는 비트를 담고 있으며
모든 인터럽트를 무시할 수 없다. 

4. 인터럽트를 받아들일 수 있다면 cpu는 지금까지의 작업을 백업한다.

5. cpu는 인터럽트 벡터를 참조하여 인터럽트 서비스 루틴을 실행한다.
서비스 루틴은 특정 인터럽트가 발생했을때 이를 처리하는 프로그램으로써 당연히 프로그램이기 때문에 메모리에 저장되어 있다.

6. 인터럽트 서비스 루틴 실행이 끝나면 백업해둔 작업을 복구시켜 실행을 개재한다.

<br>

--- 

<br>

### 참조

<br>

[강의] [개발자를 위한 컴퓨터공학 1: 혼자 공부하는 컴퓨터 구조+운영체제](https://www.inflearn.com/course/%ED%98%BC%EC%9E%90-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B5%AC%EC%A1%B0-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C)
