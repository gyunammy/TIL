## 파일 시스템

파일시스템은 여러 종류가 있으며 하나의 pc 안에서도 여러 파일 시스템을 사용할 수 있다.

<br>

## 파티셔닝과 포매팅

<br>

새로 제작된 저장장치가 사용되기 위해서는 파티셔닝과 포매팅 작업이 선행되어야 한다.

파티셔닝은 저장장치의 논리적인 영역을 구획하는 작업을 말한다.

포매팅은 어떤 방식으로 파일을 관리할지 결정하고 새로운 데이터를 쓸 준비하는 작업을 말한다. 포매팅을 통해 파티션마다 다른 파일 시스템을 설정해줄 수 있다.

이처럼 저장장치에 파티셔닝을 통해 논리적인 영역을 구획하고, 포매팅을 통해 어떤 방법으로 파일을 관리할지 결정하고 나면 해당 저장장치에 파일과 디렉터리 생성 및 관리가 가능해진다.

운영체제는 파일과 디렉터리를 블록단위로 읽고 쓴다. 즉, 하나의 파일이 보조기억장치에 저장될 때에는 여러 블록에 걸쳐 저장된다.

<br>

## 파일 할당 방법

<br>

파일을 보조기억장치에 할당하는 방법은 연속할당, 불연속 할당 두가지 방법이 있다.

<br>

### 1. 연속할당

<br>

연속할당은 이름 그대로 보조기억장치 내 연속적인 블록에 파일 할당하는 방법이다.
연속된 파일에 접근하기 위해서는 해당 파일이 저장된 첫번째 블록 주소와 블록 단위의 길이를 알아야 한다.

따라서 디렉터리 엔트리에는 파일이름과 첫번째 블록 주소와 블록 단위 길이를 명시된다.

연속할당을 사용했을 때의 문제점은 외부 단편화를 야기할 수 있다는 점이 있다.

<br>

### 2. 불연속 할당

<br>

오늘날 파일 할당방법은 연속할당보다 불연속 할당이 많이 사용되어진다. 불연속 할당에는 연결할당과 색인할당으로 이루어져 있다.

<br>

### 2-1 연결할당

<br>

각 블록의 일부에 다음 블록의 주소를 저장하여 각 블록이 다음 블록을 가리키는 형태로 저장하는 방법이며 파일을 이루는 데이터 블록을 연결 리스트로 관리한다. 

연결할당의 단점은 반드시 첫번째 블록부터 하나씩 읽어들여야 한다는점과 오류발생시 해당 블럭 이후 블록의 접근이 어렵다는 점이 있다.

<br>

### 2-2 색인할당

<br>

색인할당 방법은 파일의 모든 블록 주소를 색인 블록이라는 하나의 블록에 모아 관리하는 방식으로 파일 내 임의의 위치에 접근하기 용이하다.

색인할당을 사용할 경우 디렉터리 엔트리에는 해당파일이름과 색인 블록 주소가 명시된다.

<br>

## FAT 파일 시스템

<br>

FAT 파일 시스템은 연결 할당 기반의 파일 시스템으로서 연결할당의 단점을 보완한 파일 시스템이다. 

연결할당을 사용했을때에 오류 발생시 이후 블록에 접근하기 어렵다는 단점은 각 블록에 포함된 다음 블록 주소를 한곳에 모아 테이블로 관리함으로써 보완하게 된다.

다음블록주소를 모아 만든 테이블을 File Allocation Table 줄여서 FAT라고 한다.

<br>

## 유닉스 파일 시스템

<br>

유닉스 파일 시스템은 색인할당기반의 파일시스템으로서 색인블록에 해당하는 i-node에 파일의 속성 정보와 15개의 블록 주소를 저장할수 있다.

15개의 블록 이상의 공간을 요구하는 프로그램일 경우 아래와 같은 과정을 통해 파일을 저장하게 된다.

<br>

1. 블록 주소 중 12개에는 직접 블록 주소 저장한다. 여기서 직접블록은 파일 데이터가 저장된 블록을 뜻한다.

2. 1번 방법으로 충분하지 않는다면 13번째 주소에 단일 간접 블록 주소를 저장한다. 단일 간접 블록이란 파일데이터를 저장한 블록 주소가 저장된 블록을 뜻한다.

3. 2번 방법으로 충분하지 않는다면 14번째 주소에 이중 간접 블록 주소를 저장한다. 이중 간접 블록이란 하나의 블록에 여러개의 단일 간접 블록들의
주소를 저장하는 블록을 뜻한다.

4. 3번 방법으로 충분하지 않는다면 15번째 주소에 삼중 간접 블록 주소를 저장한다. 삼중 간접 블록이란 하나의 블록에 여러개의 이중 간접 블록들의 주소를 저장하는 블록을 뜻한다.

<br>

유닉스 파일 시스템을 사용했을 경우 디렉터리 엔트리에는 i-node 번호와 파일이름이 명시된다.

<br>

--- 

<br>

### 참조

<br>

[강의] [개발자를 위한 컴퓨터공학 1: 혼자 공부하는 컴퓨터 구조+운영체제](https://www.inflearn.com/course/%ED%98%BC%EC%9E%90-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B5%AC%EC%A1%B0-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C)

