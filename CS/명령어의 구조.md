# 명령어의 구조

## 명령어의 구조

<br>

명령어는 연산코드와 오퍼랜드로 이루어져 있다. 연산코드는 수행할 연산을 담고있는 부분을 말하며, 오퍼랜드는 연산에 사용될 데이터 또는 데이터가 저장된 메모리상의 위치의 정보를 담고 있는 부분을 말한다.

<br>

### 1. 연산코드

<br>

연산코드가 담고있는 내용은 cup마다 다르다. 하지만 대부분의 공통적으로 가지고 있는 연산코드는 4가지가 있다.

아래 설명되는 코드들은 cup마다 표현방식이 다르기 때문에 유형파악에 의의를 두어야 한다.

<br>

### 1) 데이터 전송 
move : 데이터 이동  
store : 데이터 저장  
load (fetch) : 메모리에서 cpu로 데이터를 가져오기  
push : 스택에 데이터 저장  
pop : 스택의 최상단 데이터를 가져와라  

<br>

### 2) 산술/논리 연산
add / subtract / multiply / divide : +, -, *, /  
increment / decrement : +1, -1  
and, or ...  
compare : 두개의 숫자 또는 논리값 비교  

<br>

### 3) 제어 흐름 변경
jump : 특정 주소로 실행 순서 변경  
half : 프로그램 실행 중지   
call : 되돌아올 주소를 저장한 채 특정 주소로 실행순서를 변경  
return : call 을 호출할 때 저장했던 주소로 이동  

<br>
 
### 4) 입출력 제어
read : 데이터 읽기  
write : 데이터 쓰기  
...

<br>

### 2. 오퍼랜드

<br>

오퍼랜드가 저장되는 공간에는 사용할 데이터 보다 데이터가 담긴 메모리상의 주소가 자주 담기며 이 때문에 오퍼랜드에 값이 담기는 공간을 주소필드 라고도 부른다. 

데이터를 직접 담지않고, 주소를 자주담는 이유는 주소필드에 표현할 수 있는 데이터는 고정되어 있어 한정된 공간에 많은 양의 데이터를 직접 표현하기는 어렵기 때문이다.

오퍼랜드는 없을수도, 하나 이상이 존재할 수도 있다.

<br>

### 유효주소

<br>

유효주소는 연산에 사용할 데이터가 저장된 위치를 말한다. 즉 주소필드에 작성된 주소값이 유효주소가 된다.
 
cpu는 오퍼랜드 공간에 연산에 사용할 데이터자체가 담겨있던, 데이터가 위치한 주소값이 담겨있던 상관없이 데이터에 접근하여
연산을 수행할 수 있어야한다. 그 방법을 명령어 주소 지정 방식이라고 한다.

<br>

### 명령어 주소 지정 방식

<br>

### 1. 즉시 주소 지정 방식 

<br>

연산에 사용할 데이터를 오퍼랜드 필드에 직접명시한 경우를 말하며, 가장 간단한 형태의 주소지정 방식이다.
오퍼랜드의 크기가 정해져있기 때문에 표현할수 있는 데이터의 크기가 작아 제한이 있지만 연산속도가 빠르다.

<br>

### 2. 직접 주소 지정 방식

<br>

오퍼랜드 필드에 연산에 사용할 데이터가 담긴 주소값을 직접적으로 명시하는 형태의 주소지정 방식이며
유효주소를 표현할 수 있는 크기가 연산코드만큼 줄어들 수 있다는 단점이 있다.

<br>

### 3. 간접 주소 지정 방식

<br>

오퍼랜드 필드에 유효 주소값이 담긴 공간의 주소값을 명시하는 형태의 주소지정 방식이며 이 방법을 통해 직접 주소 지정 방식의 유효주소를 표현하는 공간의 제약 단점을 해결할 수 있다. 

하지만 앞선 두 방식과 비교했을때 연산 속도가 느리다는 단점이 있다.

cup가 메모리내부의 특정 주소의 데이터에 접근하는 시간은 상대적으로 오려걸린다. 따라서 cup의 메모리 접근을 최소화 
하는 것이 빠른 속도를 유지하는 것의 키포인트가 된다.

<br>

### 4. 레지스터 주소 지정 방식

<br>

오퍼랜드 필드에 메모리가 아닌 레지스터에 있는 데이터가 있는 공간의 주소를 담는 형태의 주소지정 방식이다.
이 방법이 사용되는 이유는 cup가 메모리에 접근하는 시간보다 레지스터에 접근하는 시간이 적게 걸리기 때문이다.

<br>

### 5. 레지스터 간접 주소 지정 방식

<br>

메모리에 저장되어 있는 데이터의 주소값을 레지스터에 저장한 후, 오퍼랜드 필드에 해당 레지스터의 주소값을 담는 방식이다. 

<br>

--- 

<br>

### 참조

<br>

[강의] [개발자를 위한 컴퓨터공학 1: 혼자 공부하는 컴퓨터 구조+운영체제](https://www.inflearn.com/course/%ED%98%BC%EC%9E%90-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B5%AC%EC%A1%B0-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C)
